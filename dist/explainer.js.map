{"version":3,"sources":["src/explainer.js"],"names":["Explainer","constructor","text","now","Date","replaceAll","listForm","list","issued_until","min_stay","sunday_rule","max_stay","booking_class","cancelable","currency","price","change","cabinclass","weekday_to","weekday_from","weekday","from","until","advanced_reservation_days","stopover","travel_period","i","length","to","travel_commenced","travel_period_blackout","travel_period_from","travel_period_to","child_charge","infant_charge","infant_seat_charge","found","match","parseInt","split","date","date_string","toISOString","substring","found2","no_luggage","explain","lang","result","map","month_day_period_to_yearly_periods","flat","sort","a","b","period","join","tage","days","this_year_from","this_year_to","getFullYear","next_year_from","next_year_to","last_year","console","log","regex","periods","day","month_name","year","trim","months","toLocaleDateString","month","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC","MON","TUE","WED","THU","FRI","SAT","SUN"],"mappings":"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","sourceRoot":"/source_map/","sourcesContent":["class Explainer {\n  text = '';\n  now = new Date();\n\n  constructor(text) {\n    this.text = text.replaceAll(/\\n+/g, ' ').replaceAll(/[ ]+/g, ' ');\n  }\n\n  listForm() {\n    let list = '<ul>';\n    this.issued_until != null\n      ? (list +=\n          '<li>Issued Until: ' +\n          this.#date_to_text(this.issued_until, 'de') +\n          '</li>')\n      : {};\n    this.min_stay != null\n      ? (list += '<li>Min. Stay: ' + this.min_stay + ' days')\n      : {};\n    if (this.sunday_rule != null) {\n      if (this.min_stay != null) {\n        list += ' or a Sunday </li>';\n      } else {\n        list += '<li>Min. Stay: A Sunday</li>';\n      }\n    } else {\n      if (this.min_stay != null) {\n        list += '</li>';\n      }\n    }\n    this.max_stay != null\n      ? (list += '<li>Max. Stay: ' + this.max_stay + ' months</li>')\n      : {};\n    this.booking_class != null\n      ? (list += '<li>Booking Class: ' + this.booking_class + '</li>')\n      : {};\n    this.cancelable === 'yes' || this.cancelable === 'no'\n      ? (list += '<li>Cancelable: ' + this.cancelable + '</li>')\n      : (list +=\n          '<li>Cancelable: ' +\n          this.cancelable.currency +\n          this.cancelable.price +\n          '</li>');\n    this.change === 'yes' || this.change === 'no'\n      ? (list += '<li>Change: ' + this.change + '</li>')\n      : (list +=\n          '<li>Rebooking: ' +\n          this.change.currency +\n          this.change.price +\n          '</li>');\n    this.cabinclass != null\n      ? (list += '<li>Cabin Class: ' + this.cabinclass + '</li>')\n      : {};\n    this.weekday_to != null\n      ? (list += '<li>Weekday To: ' + this.weekday_to + '</li>')\n      : {};\n    this.weekday_from != null\n      ? (list += '<li>Weekday From: ' + this.weekday_from + '</li>')\n      : {};\n    this.weekday != null\n      ? (list +=\n          '<li>Weekday: ' +\n          this.weekday.from +\n          ' - ' +\n          this.weekday.until +\n          '</li>')\n      : {};\n    this.advanced_reservation_days != null\n      ? (list +=\n          '<li>Advanced Reservation : ' +\n          this.advanced_reservation_days +\n          ' days</li>')\n      : {};\n    list += '<li>Stopover: ' + this.stopover + '</li>';\n\n    if (this.travel_period != null) {\n      list += '<li>Travel Period: <ul>';\n      for (var i = 0; i < this.travel_period.length; i++) {\n        list +=\n          '<li>' +\n          this.#date_to_text(this.travel_period[i].from, 'de') +\n          ' - ' +\n          this.#date_to_text(this.travel_period[i].to, 'de') +\n          '</li>';\n      }\n      list += '</ul></li>';\n    }\n\n    if (this.travel_commenced != null) {\n      list += '<li>Travel Commenced: <ul>';\n      for (var i = 0; i < this.travel_commenced.length; i++) {\n        list +=\n          '<li>' +\n          this.#date_to_text(this.travel_commenced[i].from, 'de') +\n          ' - ' +\n          this.#date_to_text(this.travel_commenced[i].to, 'de') +\n          '</li>';\n      }\n      list += '</ul></li>';\n    }\n\n    if (this.travel_period_blackout != null) {\n      list += '<li>Travel Period Blackout: <ul>';\n      for (var i = 0; i < this.travel_period_blackout.length; i++) {\n        list +=\n          '<li>' +\n          this.#date_to_text(this.travel_period_blackout[i].from, 'de') +\n          ' - ' +\n          this.#date_to_text(this.travel_period_blackout[i].to, 'de') +\n          '</li>';\n      }\n      list += '</ul></li>';\n    }\n\n    if (this.travel_period_from != null) {\n      list += '<li>Travel Period From: <ul>';\n      for (var i = 0; i < this.travel_period_from.length; i++) {\n        list +=\n          '<li>' +\n          this.#date_to_text(this.travel_period_from[i].from, 'de') +\n          ' - ' +\n          this.#date_to_text(this.travel_period_from[i].to, 'de') +\n          '</li>';\n      }\n      list += '</ul></li>';\n    }\n\n    if (this.travel_period_to != null) {\n      list += '<li>Travel Period To: <ul>';\n      for (var i = 0; i < this.travel_period_to.length; i++) {\n        list +=\n          '<li>' +\n          this.#date_to_text(this.travel_period_to[i].from, 'de') +\n          ' - ' +\n          this.#date_to_text(this.travel_period_to[i].to, 'de') +\n          '</li>';\n      }\n      list += '</ul></li>';\n    }\n\n    this.child_charge != null\n      ? (list += '<li>Child Charge: ' + this.child_charge * 100 + '%</li>')\n      : {};\n    this.infant_charge != null\n      ? (list += '<li>Infant Charge: ' + this.infant_charge * 100 + '%</li>')\n      : {};\n    this.infant_seat_charge != null\n      ? (list +=\n          '<li>Infant with Seat Charge: ' +\n          this.infant_seat_charge * 100 +\n          '%</li>')\n      : {};\n    return list + '</ul>';\n  }\n\n  get cancelable() {\n    let found = this.text.match(\n      /CANCELLATIONS (?:BEFORE DEPARTURE|ANY TIME) CHARGE (\\w\\w\\w) (\\d+)/\n    );\n    if (null !== found && 3 === found.length) {\n      return { currency: found[1], price: parseInt(found[2]) };\n    }\n    found = this.text.match(\n      /(?:BEFORE DEPARTURE|ANY TIME) TICKET IS NON-REFUNDABLE/\n    );\n    if (null != found) {\n      return 'no';\n    }\n    found = this.text.match(\n      /CANCELLATIONS (?:BEFORE DEPARTURE|ANY TIME) CANCELLATIONS PERMITTED/\n    );\n    if (null != found) {\n      return 'yes';\n    }\n\n    return null;\n  }\n\n  get cabinclass() {\n    let found = this.text.match(\n      /THESE FARES APPLY FOR ((?:\\w+ )+)CLASS SERVICE/\n    );\n    if (null !== found && 2 === found.length) {\n      switch (found[1]) {\n        case 'ECONOMY ':\n          return 'Y';\n        case 'BUSINESS ':\n          return 'C';\n        case 'PREMIUM ECONOMY ':\n          return 'W';\n        case 'FIRST ':\n          return 'F';\n      }\n    }\n    return null;\n  }\n\n  get change() {\n    let found = this.text.match(\n      /CHANGES (?:BEFORE DEPARTURE|ANY TIME) CHARGE (\\w\\w\\w) (\\d+)/\n    );\n    if (null !== found && 3 === found.length) {\n      return { currency: found[1], price: parseInt(found[2]) };\n    }\n    found = this.text.match(\n      /(?:BEFORE DEPARTURE|ANY TIME) CHANGES NOT PERMITTED/\n    );\n    if (null != found) {\n      return 'no';\n    }\n    found = this.text.match(\n      /CHANGES (?:BEFORE DEPARTURE|ANY TIME) CHANGES PERMITTED/\n    );\n    if (null != found) {\n      return 'yes';\n    }\n\n    return null;\n  }\n\n  get booking_class() {\n    let found = this.text.match(/General notes.*?\\s([A-Z])\\s/);\n\n    if (null === found || 2 !== found.length) {\n      return null;\n    }\n    return found[1];\n  }\n\n  get weekday() {\n    let found = this.text.match(/PERMITTED (\\w\\w\\w) THROUGH (\\w\\w\\w)/);\n    if (null === found || 3 !== found.length) {\n      return null;\n    }\n    return { from: found[1], until: found[2] };\n  }\n\n  get weekday_to() {\n    let found = this.text.match(/TO [A-Z ]+ - PERMITTED ((\\w\\w\\w\\/)+\\w\\w\\w)/);\n    if (null === found || 3 !== found.length) {\n      return null;\n    }\n\n    return found[1].split('/');\n  }\n\n  get weekday_from() {\n    let found = this.text.match(/FROM [A-Z ]+ - PERMITTED ((\\w\\w\\w\\/)+\\w\\w\\w)/);\n    if (null === found || 3 !== found.length) {\n      return null;\n    }\n\n    return found[1].split('/');\n  }\n\n  get issued_until() {\n    let found = this.text.match(\n      /TICKETS MUST BE ISSUED (?:ON\\/AFTER \\d{2}\\w{3} \\d{2} AND |)ON\\/BEFORE (\\d{2})(\\w{3}) (\\d{2})/\n    );\n\n    if (null === found || 4 !== found.length) {\n      return null;\n    }\n\n    let date = new Date(found[1] + ' ' + found[2] + ' ' + found[3] + ' UTC');\n    let date_string = date.toISOString().substring(0, 10);\n    return date_string;\n  }\n\n  get advanced_reservation_days() {\n    let found = this.text.match(\n      /RESERVATIONS FOR ALL SECTORS (?:AND TICKETING )*ARE REQUIRED AT LEAST (\\d{1,3}) DAYS/\n    );\n\n    if (null === found || 2 !== found.length) {\n      return null;\n    }\n\n    return parseInt(found[1]);\n  }\n\n  get stopover() {\n    let found = this.text.match(/FREE STOPOVER PERMITTED/);\n    let found2 = this.text.match(\n      /(STOPOVERS NOT PERMITTED)|(NO STOPOVERS PERMITTED)/\n    );\n    return found ? 'free' : found2 ? 'not permitted' : null;\n  }\n\n  get no_luggage() {\n    let found = this.text.match(/(?:NO|ZERO) BAGGAGE ALLOWANCE MUST BE /);\n    return found != null;\n  }\n\n  get travel_period() {\n    let found = this.#parse_travel_period(\n      /Seasonal restrictions\\s*PERMITTED ([A-Z0-9 ]+) ON/\n    );\n    if (null === found) {\n      return null;\n    }\n\n    return found;\n  }\n\n  get travel_commenced() {\n    let found = this.text.match(\n      /VALID FOR TRAVEL COMMENCING (?:ON\\/AFTER (\\d{2}\\w{3} \\d{2}) AND |)ON\\/\\s*BEFORE (\\d{2}\\w{3} \\d{2})/\n    );\n\n    if (null === found || 3 !== found.length) {\n      return null;\n    }\n\n    return {\n      from: found[1] ? this.#parse_date(found[1]) : null,\n      to: found[2] ? this.#parse_date(found[2]) : null,\n    };\n  }\n\n  get travel_period_blackout() {\n    return this.#parse_travel_period(/TRAVEL IS NOT PERMITTED ([A-Z0-9 ]+)./);\n  }\n\n  get travel_period_from() {\n    return this.#parse_travel_period(\n      /(?:FROM [A-Z ]+|OUTBOUND) - PERMITTED ([A-Z0-9 ]+) FOR EACH/\n    );\n  }\n\n  get travel_period_to() {\n    return this.#parse_travel_period(\n      /(?:TO [A-Z ]+|INBOUND) - PERMITTED ([A-Z0-9 ]+) FOR EACH/\n    );\n  }\n\n  get min_stay() {\n    let found = this.text.match(/NO EARLIER THAN (\\d+) DAYS AFTER/);\n\n    if (null === found || 2 !== found.length) {\n      return null;\n    }\n\n    return parseInt(found[1]);\n  }\n\n  get sunday_rule() {\n    let found = this.text.match(/THE FIRST SUN/);\n    if (found === null) {\n      return null;\n    }\n    return true;\n    //let findand = this.text.match(/AND - TRAVEL FROM/);\n    //let findor = this.text.match(/OR - TRAVEL FROM/);\n    //return findand != null ? 'and' : findor != null ? 'or' : true;\n  }\n\n  get max_stay() {\n    let found = this.text.match(/NO LATER THAN (\\d+) MONTHS AFTER/);\n\n    if (null === found || 2 !== found.length) {\n      return null;\n    }\n\n    return parseInt(found[1]);\n  }\n\n  get child_charge() {\n    let found = this.text.match(\n      /ACCOMPANIED CHILD 2-11(?:\\. ID REQUIRED|) - (?:CHARGE |)(\\d{1,3}|NO DISCOUNT) (?:PERCENT OF THE FARE\\.|OR )/\n    );\n\n    if (null === found || 2 !== found.length) {\n      return null;\n    }\n\n    return 'NO DISCOUNT' === found[1] ? 1 : parseInt(found[1]) / 100;\n  }\n\n  get infant_charge() {\n    let found = this.text.match(\n      /INFANT UNDER 2 WITHOUT A SEAT - CHARGE (\\d{1,3}|NO DISCOUNT) PERCENT OF THE FARE\\./\n    );\n\n    if (null === found || 2 !== found.length) {\n      return null;\n    }\n\n    return 'NO DISCOUNT' === found[1] ? 1 : parseInt(found[1]) / 100;\n  }\n\n  get infant_seat_charge() {\n    let found = this.text.match(\n      /INFANT UNDER 2 WITH A SEAT(?:\\. ID REQUIRED|) - (?:CHARGE |)(\\d{1,3}|NO DISCOUNT) (?:PERCENT OF THE FARE\\.|OR )/\n    );\n\n    if (null === found || 2 !== found.length) {\n      return null;\n    }\n\n    return 'NO DISCOUNT' === found[1] ? 1 : parseInt(found[1]) / 100;\n  }\n\n  explain(lang = 'en') {\n    let result = '';\n\n    if ('de' === lang) {\n      result += `Buchbar ist der Tarif ${\n        this.issued_until\n          ? `bis zum ${this.#date_to_text(this.issued_until, lang)} `\n          : ''\n      }für `;\n\n      if (this.travel_period) {\n        result += `Reisen zwischen dem ${this.travel_period\n          .map(({ from, to }) =>\n            this.constructor.month_day_period_to_yearly_periods(\n              from,\n              to,\n              this.now\n            )\n          )\n          .flat()\n          .sort((a, b) => a.from > b.from)\n          .map(\n            (period) =>\n              `${this.#date_to_text(period.from, lang)} ${\n                period.from == null ? '' : ' - '\n              } ${this.#date_to_text(period.to, lang)}`\n          )\n          .join(', ')}`;\n      } else if (this.travel_period_from) {\n        result += `Abflüge zwischen dem ${this.travel_period_from\n          .map(({ from, to }) =>\n            this.constructor.month_day_period_to_yearly_periods(\n              from,\n              to,\n              this.now\n            )\n          )\n          .flat()\n          .sort((a, b) => a.from > b.from)\n          .map(\n            (period) =>\n              `${this.#date_to_text(period.from, lang)} - ${this.#date_to_text(\n                period.to,\n                lang\n              )}`\n          )\n          .join(', ')} `;\n        if (this.travel_period_to) {\n          result += `und Rückflüge zwischen dem ${this.travel_period_to\n            .map(({ from, to }) =>\n              this.constructor.month_day_period_to_yearly_periods(\n                from,\n                to,\n                this.now\n              )\n            )\n            .flat()\n            .sort((a, b) => a.from > b.from)\n            .map(\n              (period) =>\n                `${this.#date_to_text(\n                  period.from,\n                  lang\n                )} - ${this.#date_to_text(period.to, lang)}`\n            )\n            .join(', ')} `;\n        }\n      } else if (this.travel_period_to) {\n        result += `Rückflüge zwischen dem ${this.travel_period_to\n          .map(({ from, to }) =>\n            this.constructor.month_day_period_to_yearly_periods(\n              from,\n              to,\n              this.now\n            )\n          )\n          .flat()\n          .sort((a, b) => a.from > b.from)\n          .map(\n            (period) =>\n              `${this.#date_to_text(period.from, lang)} - ${this.#date_to_text(\n                period.to,\n                lang\n              )}`\n          )\n          .join(', ')} `;\n      } else if (this.travel_commenced) {\n        if (this.travel_commenced.from && this.travel_commenced.to) {\n          result += `Abflüge zwischen dem ${this.#date_to_text(\n            this.travel_commenced.from,\n            lang\n          )} und ${this.#date_to_text(this.travel_commenced.to, lang)}`;\n        } else if (this.travel_commenced.from) {\n          result += `Abflüge nach dem ${this.#date_to_text(\n            this.travel_commenced.from,\n            lang\n          )}`;\n        } else if (this.travel_commenced.to) {\n          result += `Abflüge bis spätestens ${this.#date_to_text(\n            this.travel_commenced.to,\n            lang\n          )}`;\n        }\n      } else {\n        result += `Flüge ohne einen bestimmten Reisezeitraum`;\n      }\n\n      result += '.';\n\n      if (this.weekday_to) {\n        result += ' Allerdings darf der Abflug nur an einem ';\n        for (var i = 0; i < this.weekday_to.length - 1; i++) {\n          result += tage[this.weekday_to[i]] + ', ';\n        }\n        result +=\n          'oder ' +\n          tage[this.weekday_to[this.weekday_to.length - 1]] +\n          ' stattfinden.';\n      }\n\n      if (this.weekday_from) {\n        result += ' Der Rückflug darf nur an einem ';\n        for (var i = 0; i < this.weekday_from.length - 1; i++) {\n          result += tage[this.weekday_from[i]] + ', ';\n        }\n        result +=\n          'oder ' +\n          tage[this.weekday_from[this.weekday_from.length - 1]] +\n          ' stattfinden.';\n      }\n\n      if (this.weekday) {\n        result +=\n          ' Dieses Angebot gilt nur für Flüge zwischen ' +\n          tage[this.weekday.from] +\n          ' und ' +\n          tage[this.weekday.until] +\n          '.';\n      }\n\n      if (null === this.issued_until) {\n        result += ` Der Tarif hat kein Ablaufdatum, kann aber trotzdem jederzeit zurückgezogen werden. `;\n      }\n\n      if (this.min_stay) {\n        result += ` Der Mindestaufenthalt beträgt ${this.min_stay} Tage${\n          true === this.sunday_rule\n            ? ` oder eine Nacht von Samstag auf Sonntag`\n            : ''\n        }. `;\n      }\n\n      if (this.max_stay) {\n        result += `Der maximale Aufenthalt beträgt ${\n          1 === this.max_stay ? `einen Monat` : `${this.max_stay} Monate`\n        }. `;\n      }\n\n      result += '\\nDie ';\n      switch (this.cabinclass) {\n        case 'Y':\n          result += 'Economy-Class-';\n          break;\n        case 'C':\n          result += 'Business-Class-';\n          break;\n        case 'W':\n          result += 'Premium-Economy-Class-';\n          break;\n        case 'F':\n          result += 'First-Class-';\n          break;\n      }\n      result += `Tickets werden in Buchungsklasse ${this.booking_class} ausgestellt`;\n      if (this.advanced_reservation_days) {\n        result += ` und müssen mindestens ${this.advanced_reservation_days} Tage vor Abflug gebucht werden. `;\n      } else {\n        result += `.`;\n      }\n\n      this.no_luggage\n        ? (result += 'Bei diesem Tarif ist kein Aufgabegepäck inklusive.')\n        : {};\n\n      if ('free' === this.stopover) {\n        result += ` Mindestens ein kostenloser Stopover ist erlaubt.`;\n      } else if ('not permitted' === this.stopover) {\n        result += ` Stopover sind nicht erlaubt.`;\n      }\n\n      if (this.cancelable != null) {\n        result += ' Diese Flüge lassen sich ';\n        this.cancelable === 'no'\n          ? (result += 'nicht')\n          : this.cancelable === 'yes'\n          ? (result += 'kostenlos')\n          : (result +=\n              'für ' + this.cancelable.price + ' ' + this.cancelable.currency);\n        result += ' stornieren';\n      }\n      if (this.change != null) {\n        (this.change === 'no' && this.cancelable === 'no') ||\n        (this.change === 'yes' && this.cancelable === 'yes')\n          ? (result += ' und auch')\n          : (result += ' aber');\n        result += ' umbuchen lassen sich die Flüge ';\n        this.change === 'no'\n          ? (result += 'nicht.')\n          : this.change === 'yes'\n          ? (result += 'ohne Umbuchungsgebühr.')\n          : (result +=\n              'für ' +\n              this.cancelable.price +\n              ' ' +\n              this.cancelable.currency +\n              '.');\n      }\n    } else {\n      // Fallback to en\n      result += `This fare can be booked ${\n        this.issued_until\n          ? `until ${this.#date_to_text(this.issued_until, lang)} `\n          : ''\n      }for `;\n\n      if (this.travel_period) {\n        result += `trips between ${this.travel_period\n          .map(({ from, to }) =>\n            this.constructor.month_day_period_to_yearly_periods(\n              from,\n              to,\n              this.now\n            )\n          )\n          .flat()\n          .sort((a, b) => a.from > b.from)\n          .map(\n            (period) =>\n              `${this.#date_to_text(period.from, lang)} ${\n                period.from == null ? '' : ' - '\n              } ${this.#date_to_text(period.to, lang)}`\n          )\n          .join(', ')}`;\n      } else if (this.travel_period_from) {\n        result += `departures between ${this.travel_period_from\n          .map(({ from, to }) =>\n            this.constructor.month_day_period_to_yearly_periods(\n              from,\n              to,\n              this.now\n            )\n          )\n          .flat()\n          .sort((a, b) => a.from > b.from)\n          .map(\n            (period) =>\n              `${this.#date_to_text(period.from, lang)} - ${this.#date_to_text(\n                period.to,\n                lang\n              )}`\n          )\n          .join(', ')} `;\n        if (this.travel_period_to) {\n          result += `and inbound flights between ${this.travel_period_to\n            .map(({ from, to }) =>\n              this.constructor.month_day_period_to_yearly_periods(\n                from,\n                to,\n                this.now\n              )\n            )\n            .flat()\n            .sort((a, b) => a.from > b.from)\n            .map(\n              (period) =>\n                `${this.#date_to_text(\n                  period.from,\n                  lang\n                )} - ${this.#date_to_text(period.to, lang)}`\n            )\n            .join(', ')} `;\n        }\n      } else if (this.travel_period_to) {\n        result += `inbound flights between ${this.travel_period_to\n          .map(({ from, to }) =>\n            this.constructor.month_day_period_to_yearly_periods(\n              from,\n              to,\n              this.now\n            )\n          )\n          .flat()\n          .sort((a, b) => a.from > b.from)\n          .map(\n            (period) =>\n              `${this.#date_to_text(period.from, lang)} - ${this.#date_to_text(\n                period.to,\n                lang\n              )}`\n          )\n          .join(', ')} `;\n      } else if (this.travel_commenced) {\n        if (this.travel_commenced.from && this.travel_commenced.to) {\n          result += `Departures between ${this.#date_to_text(\n            this.travel_commenced.from,\n            lang\n          )} und ${this.#date_to_text(this.travel_commenced.to, lang)}`;\n        } else if (this.travel_commenced.from) {\n          result += `Departures after ${this.#date_to_text(\n            this.travel_commenced.from,\n            lang\n          )}`;\n        } else if (this.travel_commenced.to) {\n          result += `Departures before ${this.#date_to_text(\n            this.travel_commenced.to,\n            lang\n          )}`;\n        }\n      } else {\n        result += `flights without a specific travel period`;\n      }\n\n      result += '.';\n\n      if (this.weekday_to) {\n        result += ' However, the outbound flight may only take place on a ';\n        for (var i = 0; i < this.weekday_to.length - 1; i++) {\n          result += days[this.weekday_to[i]] + ', ';\n        }\n        result +=\n          'or ' + days[this.weekday_to[this.weekday_to.length - 1]] + '.';\n      }\n\n      if (this.weekday_from) {\n        result += ' The inbound flight can take place on a ';\n        for (var i = 0; i < this.weekday_from.length - 1; i++) {\n          result += days[this.weekday_from[i]] + ', ';\n        }\n        result +=\n          'or ' + days[this.weekday_from[this.weekday_from.length - 1]] + '.';\n      }\n\n      if (this.weekday) {\n        result +=\n          ' This deal is only available for flights departing from ' +\n          days[this.weekday.from] +\n          ' to ' +\n          days[this.weekday.until] +\n          '.';\n      }\n\n      if (null === this.issued_until) {\n        result += ` The fare has no expiration date and can thus be withdrawn anytime. `;\n      }\n\n      if (this.min_stay) {\n        result += ` The minimum stay requirement is of ${this.min_stay} days${\n          true === this.sunday_rule ? ` (or a Sunday)` : ''\n        }. `;\n      }\n\n      if (this.max_stay) {\n        result += `Furthermore, your stay cannot exceed ${\n          1 === this.max_stay ? `one month` : `${this.max_stay} months`\n        }. `;\n      }\n\n      result += '\\nThe ';\n      switch (this.cabinclass) {\n        case 'Y':\n          result += 'economy class';\n          break;\n        case 'C':\n          result += 'business class';\n          break;\n        case 'W':\n          result += 'premium economy';\n          break;\n        case 'F':\n          result += 'first class';\n          break;\n      }\n      result += ` tickets are issued in booking class ${this.booking_class}`;\n      if (this.advanced_reservation_days) {\n        result += ` and have to be booked at least ${this.advanced_reservation_days} days before departure. `;\n      } else {\n        result += `.`;\n      }\n\n      this.no_luggage\n        ? (result += 'This fare does not include any checked luggage.')\n        : {};\n\n      if ('free' === this.stopover) {\n        result += ` At least one free stopover is permitted.`;\n      } else if ('not permitted' === this.stopover) {\n        result += ` Stopovers are not permitted.`;\n      }\n\n      if (this.cancelable != null) {\n        result += ' These flights can';\n        this.cancelable === 'no' ? (result += \"'t\") : {};\n        result += ' be canceled';\n        this.cancelable === 'yes'\n          ? (result += ' for free')\n          : this.cancelable !== 'no'\n          ? (result +=\n              ' for ' + this.cancelable.currency + ' ' + this.cancelable.price)\n          : {};\n      }\n\n      if (this.change != null) {\n        (this.change === 'no' && this.cancelable === 'no') ||\n        (this.change === 'yes' && this.cancelable === 'yes')\n          ? (result += ' and also')\n          : (result += ' but can');\n        this.change === 'no' ? (result += \"can't\") : {};\n        result += ' be rebooked ';\n        this.change === 'yes'\n          ? (result += 'without having to pay a rebooking fee.')\n          : this.change !== 'no'\n          ? (result +=\n              'for ' + this.change.currency + ' ' + this.change.price + '.')\n          : {};\n      }\n    }\n\n    return result;\n  }\n\n  #parse_travel_period(regex) {\n    let found = this.text.match(regex);\n\n    if (null === found || 2 !== found.length) {\n      return null;\n    }\n\n    let periods = found[1].split('OR').map((period) => {\n      let [from, to] = period\n        .split('THROUGH')\n        .map((date) => this.#parse_date(date));\n      return { from, to };\n    });\n    return periods;\n  }\n\n  #parse_date(date) {\n    let [, day, month_name, year = null] = date\n      .trim()\n      .match(/(\\d{2})(\\w{3})(?: (\\d{2})|)/);\n\n    return (year ? '20' + year + '-' : '') + months[month_name] + '-' + day;\n  }\n\n  #date_to_text(date, lang = 'en') {\n    if (date == null) {\n      return 'bis zum ';\n    }\n    if (5 === date.length) {\n      return new Date(new Date().getFullYear() + '-' + date).toLocaleDateString(\n        lang,\n        { day: 'numeric', month: 'long' }\n      );\n    }\n\n    return new Date(date).toLocaleDateString(lang, {\n      day: 'numeric',\n      month: 'long',\n      year: 'numeric',\n    });\n  }\n\n  static month_day_period_to_yearly_periods(from, to, now = new Date()) {\n    if (10 === from.length && 10 === to.length) {\n      if (now > new Date(from) && now > new Date(to)) {\n        return [];\n      }\n      return [{ from, to }];\n    }\n\n    let this_year_from, this_year_to;\n    this_year_from = this_year_to = now.getFullYear();\n    let next_year_from, next_year_to;\n    next_year_from = next_year_to = this_year_from + 1;\n    let last_year = this_year_from - 1;\n\n    if (\n      new Date(this_year_from + '-' + from) > new Date(this_year_to + '-' + to)\n    ) {\n      this_year_to++;\n      next_year_to++;\n    }\n\n    if (\n      now < new Date(this_year_from + '-' + from) &&\n      now < new Date(this_year_to + '-' + to)\n    ) {\n      // Period is in the future\n      return [\n        {\n          from: new Date(this_year_from + '-' + from)\n            .toISOString()\n            .substring(0, 10),\n          to: new Date(this_year_to + '-' + to).toISOString().substring(0, 10),\n        },\n      ];\n    } else if (\n      now > new Date(this_year_from + '-' + from) &&\n      now > new Date(this_year_to + '-' + to)\n    ) {\n      // Period is in the past\n      return [\n        {\n          from: new Date(next_year_from + '-' + from)\n            .toISOString()\n            .substring(0, 10),\n          to: new Date(next_year_to + '-' + to).toISOString().substring(0, 10),\n        },\n      ];\n    } else if (\n      // Currently in Period\n      now > new Date(this_year_from + '-' + from) &&\n      now < new Date(this_year_to + '-' + to)\n    ) {\n      return [\n        {\n          from: new Date(this_year_from + '-' + from)\n            .toISOString()\n            .substring(0, 10),\n          to: new Date(this_year_to + '-' + to).toISOString().substring(0, 10),\n        },\n        {\n          from: new Date(next_year_from + '-' + from)\n            .toISOString()\n            .substring(0, 10),\n          to: new Date(next_year_to + '-' + to).toISOString().substring(0, 10),\n        },\n      ];\n    }\n    console.log('nothing');\n    return [];\n  }\n}\n\nconst months = {\n  JAN: '01',\n  FEB: '02',\n  MAR: '03',\n  APR: '04',\n  MAY: '05',\n  JUN: '06',\n  JUL: '07',\n  AUG: '08',\n  SEP: '09',\n  OCT: '10',\n  NOV: '11',\n  DEC: '12',\n};\n\nconst tage = {\n  MON: 'Montag',\n  TUE: 'Dienstag',\n  WED: 'Mittwoch',\n  THU: 'Donnerstag',\n  FRI: 'Freitag',\n  SAT: 'Samstag',\n  SUN: 'Sonntag',\n};\n\nconst days = {\n  MON: 'Monday',\n  TUE: 'Tuesday',\n  WED: 'Wednesday',\n  THU: 'Thursday',\n  FRI: 'Friday',\n  SAT: 'Saturday',\n  SUN: 'Sunday',\n};\n\nexport default Explainer;\n"]}